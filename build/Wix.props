<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) Microsoft Corporation. All rights reserved.
      -->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(EnlistmentRoot)\packages\wix\$(WiXVersion)\build\Wix.props" Condition="Exists('$(EnlistmentRoot)\packages\wix\$(WiXVersion)\build\Wix.props')" />
  <Choose>
    <!-- NOTE: The WixToolSet compiles with candle.exe which generates a wixobj file from the wixproj. -->
    <!-- NOTE: The wixobj file then gets linked by light.exe and outputs the resultant msi/msm file.   -->
    <!-- NOTE: Since the Candle task takes as input the wixproj file and not this props file, any      -->
    <!-- NOTE: changes to this file may be ignored. Be sure to delete the wixobj file or update the    -->
    <!-- NOTE: wixproj file in order to pick up new changes for this file.                             -->

    <!-- Azure Devops variables -->
    <When Condition="$(Build_StagingDirectory) != ''">
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);BinOutputPath=$(Build_StagingDirectory)\bin\$(Configuration)</DefineConstants>
      </PropertyGroup>
    </When>

    <!-- Local build -->
    <Otherwise>
      <PropertyGroup>
        <DefineConstants>$(DefineConstants);BinOutputPath=$(BinRoot)\$(Configuration)</DefineConstants>
      </PropertyGroup>
    </Otherwise>
  </Choose>

  <PropertyGroup>
    <!-- This prevents APIScan and BinScope from running and erroring on wixproj files-->
    <IsPackage>true</IsPackage>
    <!-- The following guids should be regenerated for version changes -->
    <ModuleGuid>{C3B65C8B-E83F-4FBD-8347-8DBCFB378DE8}</ModuleGuid>
    <UpgradeGuid>{5CE9CEF7-4A5F-4401-B0E7-F686CC695D40}</UpgradeGuid>
    <GuidGenSeed>{460ACA78-F3F0-4CD7-8606-DA163F11C4AE}</GuidGenSeed>
  </PropertyGroup>
  <PropertyGroup>
    <!-- These values are parsed by candle.exe as preprocessor variables and can be accessed via $(var.VariableName) -->
    <DefineConstants>$(DefineConstants);Version=$(SemanticPackageVersion)</DefineConstants>
    <DefineConstants>$(DefineConstants);ModuleGuid=$(ModuleGuid)</DefineConstants>
    <DefineConstants>$(DefineConstants);UpgradeGuid=$(UpgradeGuid)</DefineConstants>
    <DefineConstants>$(DefineConstants);GuidGenSeed=$(GuidGenSeed)</DefineConstants>
  </PropertyGroup>
</Project>